{% extends "base.html" %}
{% block content %}
<main>
    <!-- TODO: change h1 -->
    <h1 style="font-size: 10vw">archive</h1>
    <hr>
    <div class="grid-container">
        {% for i in my_archive %}
        <div class="post">
            <a href="archive/{{ i.url }}">
                <h2 style="margin-bottom: 5px;">{{ i.title }}</h2>
            </a>
            <div style="margin-top: 5px; display: inline-block;">{{ i.date }}</div>
            {% for tag in i.tags %}
            <div style="display: inline-block;" class="tags">
                <h4 class="tag">{{ tag }}</h4>
            </div>
            {% endfor %}
        </div>
        {% endfor %}
    </div>
    <script>
        window.onload = () => {
            const posts = Array.from(document.getElementsByClassName('post'))
            const tags = Array.from(document.getElementsByClassName('tag'))

            let flag = false

            for (let i = 0; i < tags.length; i++) {
                tags[i].onclick = () => {
                    flag = !flag
                    console.log("clicked tag: " + tags[i].innerHTML)

                    posts.find(node => {
                        if (!node.querySelector('.tag').isEqualNode(tags[i]) && flag) {
                            node.style["display"] = 'none'
                            console.log('items to "none"')
                        }

                        if (!node.querySelector('.tag').isEqualNode(tags[i]) && !flag) {
                            node.style["display"] = ''
                            console.log('display this')
                        }
                    })
                }
            }
        }
    </script>
</main>
{% endblock %}