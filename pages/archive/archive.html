{% extends "base.html" %}
{% block content %}
<main>
    <!-- TODO: change h1 -->
    <h1 style="font-size: 10vw">archive</h1>
    <hr>
    <div class="grid-container">
        {% for i in my_archive %}
        <div class="post">
            <a href="archive/{{ i.url }}">
                <h2 style="margin-bottom: 5px;">{{ i.title }}</h2>
            </a>
            <div style="margin-top: 5px; display: inline-block;">{{ i.date }}</div>
            {% for tag in i.tags %}
            <div style="display: inline-block;" class="tags">
                <h4 class="tag">{{ tag }}</h4>
            </div>
            {% endfor %}
        </div>
        {% endfor %}
    </div>
    <script>
        window.onload = () => {
            const posts = Array.from(document.getElementsByClassName('post'))
            const tags = Array.from(document.getElementsByClassName('tag'))

            //const post_tags = posts.map(x => x.querySelectorAll('.tags'))
            //console.log(post_tags)

            for (let i = 0; i < tags.length; i++) {
                tags[i].onclick = () => {
                    // console.log(tags[i].parentElement.parentElement.firstElementChild.firstElementChild.innerHTML)
                    console.log(tags[i].innerHTML)
                    posts.find(node => {
                        // console.log(node.querySelector('.tag'))
                        // console.log(tags[i])
                        if (node.querySelector('.tag').isEqualNode(tags[i])) {
                            console.log(node)
                        }
                    })
                }
            }
        }
    </script>
</main>
{% endblock %}